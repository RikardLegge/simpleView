var modulin=function(){"use strict";function FastArray$1(e){this.array=e,this.startCursor=0,this.endCursor=e.length}function parseCss(e,t){function r(){var t=e.startCursor+1,r=s(SELECTOR),n=e.startCursor-1,o=p();return m[r]=m[r]||[],m[r].push({className:r,hash:o,namespace:h,start:t,end:n}),o}function n(){if(e.shift(),"*"===e.first()){e.shift();for(var t=0,r=0;t!==r-1&&!e.isAtEnd();)u("*"),t=e.startCursor,u("/"),r=e.startCursor}}function o(){e.shift(),u("}")}function a(){e.shift(),u("'")}function i(){e.shift(),u('"')}function s(t){var r="",n="";do r+=n,e.shift(),n=e.first();while(n.match(t)&&!e.isAtEnd());return r}function u(t){for(;e.shift()!==t&&!e.isAtEnd(););}function c(){var t="";e:for(;!e.isAtEnd();){var r=e.first();switch(r){case"}":e.shift();break e;case"/":n();break;case"'":a();break;case'"':i();break;default:t+=e.shift()}}var o=t.replace(/\s|;/g,"");return stringHash(o)}function l(){e:for(;!e.isAtEnd();){var t=e.first();switch(t){case"}":e.shift();break e;case"/":n();break;case"'":a();break;case'"':i();break;default:e.shift()}}}function p(){for(;!e.isAtEnd();){var t=e.first();switch(t){case".":return r();case"#":return r();case"{":return e.shift(),d?c():l();case"/":n();break;case"'":a();break;case'"':i();break;default:e.shift()}}}function f(){for(;!e.isAtEnd();){var t=e.first();switch(t){case"@":o();break;case".":r();break;case"#":r();break;case"/":n();break;case"'":a();break;case'"':i();break;default:e.shift()}}return m}e=new FastArray$1(e);var h=t.namespace||"",d=t.useHash||!1,m={};return f()}function modulizeCss(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.timers||{},n=t.namespace||"",o=t.substitutionPattern||"{name}",a=o.indexOf("{hash}")!==-1;r.start=Date.now();var i=e.split("");r.stringToArray=Date.now();var s=i.slice();r.arrayCopy=Date.now();var u=parseCss(s,{namespace:n,useHash:a});r.parse=Date.now();var c={};!a&&generateClassNameSubstitutions(Object.keys(u).map(function(e){return u[e]}),o,c),r.generateClassSubstitutions=Date.now();var l=Object.keys(u).reduce(function(e,t){return e.concat(u[t])},[]);r.generateClassList=Date.now(),l.sort(function(e,t){return t.start-e.start}),r.sortClassesByPosition=Date.now();var p=replaceSelectors(i,l,function(e){return c[e.className]||generateSubstitution(e,o,c)});r.replaceClassWithToken=Date.now();var f=p.getArray();r.getArrayFromCheapArray=Date.now(),f.reverse(),r.reverseArray=Date.now();var h=arrayToString(f);return r.arrayToString=Date.now(),{encodedCss:h,substitutions:c}}function arrayToString(e){for(var t="",r=0;r<e.length;r++)t+=e[r];return t}function replaceSelectors(e,t,r){var n=new FastArray$1(new Array(e.length)),o=new FastArray$1(t);n.endCursor=0;for(var a=e.length-1;a>=0;a--){var i=o.first();if(i&&a===i.end){var s=i.end-i.start,u=r(i);a-=s;for(var c=u.length-1;c>=0;c--)n.push(u[c]);o.shift()}else n.push(e[a])}return n}function generateClassNameSubstitutions(e,t,r){e.forEach(function(e){var n=e[0];generateSubstitution(n,t,r)})}function generateSubstitution(e,t,r){var n=t.replace(/{([^}]+)}/gi,function(t,r){switch(r){case"namespace":return e.namespace;case"name":return e.className;case"random":return"r"+Math.random().toString(36).substring(7);case"hash":return"h"+(e.hash+0).toString(36);case"unique":return"u"+ ++uniqueCounter}});return r[e.className]=[],r[e.className].push(n),n}function dependencyRepositoryFactory(e){var t=e.basePath,r=new ScriptLoader({fetch:function(e){return new Request({url:e})},scriptInterceptors:scriptInterceptors,basePath:t});return new AmdDependencyRepository({loadScript:function(e){return r.load(e)},dependencyResolver:new AmdDependencyResolver})}Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<r;){var a=t[o];if(e.call(n,a,o,t))return a;o++}}}),"function"!=typeof Object.assign&&(Object.assign=function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(r[a]=o[a])}return r});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),slicedToArray=function(){function e(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)};!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ES6Promise=t()}(window,function(){function e(e){return"function"==typeof e||"object"===("undefined"==typeof e?"undefined":_typeof(e))&&null!==e}function t(e){return"function"==typeof e}function r(e){W=e}function n(e){J=e}function o(){return function(){return process.nextTick(c)}}function a(){return"undefined"!=typeof H?function(){H(c)}:u()}function i(){var e=0,t=new B(c),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function s(){var e=new MessageChannel;return e.port1.onmessage=c,function(){return e.port2.postMessage(0)}}function u(){var e=setTimeout;return function(){return e(c,1)}}function c(){for(var e=0;e<q;e+=2){var t=Z[e],r=Z[e+1];t(r),Z[e]=void 0,Z[e+1]=void 0}q=0}function l(){try{var e=require,t=e("vertx");return H=t.runOnLoop||t.runOnContext,a()}catch(e){return u()}}function p(e,t){var r=arguments,n=this,o=new this.constructor(h);void 0===o[te]&&F(o);var a=n._state;return a?!function(){var e=r[a-1];J(function(){return I(a,o,e,n._result)})}():_(n,o,e,t),o}function f(e){var t=this;if(e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&e.constructor===t)return e;var r=new t(h);return C(r,e),r}function h(){}function d(){return new TypeError("You cannot resolve a promise with itself")}function m(){return new TypeError("A promises callback cannot return that same promise.")}function y(e){try{return e.then}catch(e){return ae.error=e,ae}}function v(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function g(e,t,r){J(function(e){var n=!1,o=v(r,t,function(r){n||(n=!0,t!==r?C(e,r):A(e,r))},function(t){n||(n=!0,x(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&o&&(n=!0,x(e,o))},e)}function b(e,t){t._state===ne?A(e,t._result):t._state===oe?x(e,t._result):_(t,void 0,function(t){return C(e,t)},function(t){return x(e,t)})}function w(e,r,n){r.constructor===e.constructor&&n===p&&r.constructor.resolve===f?b(e,r):n===ae?x(e,ae.error):void 0===n?A(e,r):t(n)?g(e,r,n):A(e,r)}function C(t,r){t===r?x(t,d()):e(r)?w(t,r,y(r)):A(t,r)}function k(e){e._onerror&&e._onerror(e._result),E(e)}function A(e,t){e._state===re&&(e._result=t,e._state=ne,0!==e._subscribers.length&&J(E,e))}function x(e,t){e._state===re&&(e._state=oe,e._result=t,J(k,e))}function _(e,t,r,n){var o=e._subscribers,a=o.length;e._onerror=null,o[a]=t,o[a+ne]=r,o[a+oe]=n,0===a&&e._state&&J(E,e)}function E(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,o=void 0,a=e._result,i=0;i<t.length;i+=3)n=t[i],o=t[i+r],n?I(r,n,o,a):o(a);e._subscribers.length=0}}function M(){this.error=null}function S(e,t){try{return e(t)}catch(e){return ie.error=e,ie}}function I(e,r,n,o){var a=t(n),i=void 0,s=void 0,u=void 0,c=void 0;if(a){if(i=S(n,o),i===ie?(c=!0,s=i.error,i=null):u=!0,r===i)return void x(r,m())}else i=o,u=!0;r._state!==re||(a&&u?C(r,i):c?x(r,s):e===ne?A(r,i):e===oe&&x(r,i))}function T(e,t){try{t(function(t){C(e,t)},function(t){x(e,t)})}catch(t){x(e,t)}}function D(){return se++}function F(e){e[te]=se++,e._state=void 0,e._result=void 0,e._subscribers=[]}function P(e,t){this._instanceConstructor=e,this.promise=new e(h),this.promise[te]||F(this.promise),V(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&A(this.promise,this._result))):x(this.promise,G())}function G(){return new Error("Array Methods must be provided an Array")}function j(e){return new P(this,e).promise}function O(e){var t=this;return new t(V(e)?function(r,n){for(var o=e.length,a=0;a<o;a++)t.resolve(e[a]).then(r,n)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function N(e){var t=this,r=new t(h);return x(r,e),r}function R(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function $(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function L(e){this[te]=D(),this._result=this._state=void 0,this._subscribers=[],h!==e&&("function"!=typeof e&&R(),this instanceof L?T(this,e):$())}function U(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=L}var z=void 0;z=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var V=z,q=0,H=void 0,W=void 0,J=function(e,t){Z[q]=e,Z[q+1]=t,q+=2,2===q&&(W?W(c):ee())},K="undefined"!=typeof window?window:void 0,Y=K||{},B=Y.MutationObserver||Y.WebKitMutationObserver,X="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Q="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Z=new Array(1e3),ee=void 0;ee=X?o():B?i():Q?s():void 0===K&&"function"==typeof require?l():u();var te=Math.random().toString(36).substring(16),re=void 0,ne=1,oe=2,ae=new M,ie=new M,se=0;return P.prototype._enumerate=function(){for(var e=this.length,t=this._input,r=0;this._state===re&&r<e;r++)this._eachEntry(t[r],r)},P.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===f){var o=y(e);if(o===p&&e._state!==re)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(r===L){var a=new r(h);w(a,e,o),this._willSettleAt(a,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},P.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===re&&(this._remaining--,e===oe?x(n,r):this._result[t]=r),0===this._remaining&&A(n,this._result)},P.prototype._willSettleAt=function(e,t){var r=this;_(e,void 0,function(e){return r._settledAt(ne,t,e)},function(e){return r._settledAt(oe,t,e)})},L.all=j,L.race=O,L.resolve=f,L.reject=N,L._setScheduler=r,L._setAsap=n,L._asap=J,L.prototype={constructor:L,then:p,catch:function(e){return this.then(null,e)}},L.polyfill=U,L.Promise=L,L}),ES6Promise.polyfill();var ModulinFactory=function(){function e(t){var r=t.dependencyRepositoryFactory,n=t.loaderFactory,o=t.temporaryLoaderFactory;classCallCheck(this,e),this.dependencyRepositoryFactory=r,this.loaderFactory=n,this.temporaryLoaderFactory=o}return createClass(e,[{key:"createLoader",value:function(e){var t=this.dependencyRepositoryFactory({basePath:e}),r=this.loaderFactory.createLoader(t);return this.temporaryLoaderFactory.setInstance(r),r}},{key:"load",value:function(e,t){var r=this.createLoader(e);r([t],{})}}]),e}(),Request=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.method,n=void 0===r?"GET":r,o=t.url;return classCallCheck(this,e),new Promise(function(e,t){var r=new XMLHttpRequest;r.open(n,o),r.onreadystatechange=function(){4==r.readyState&&(200==r.status?e(r.responseText):t(r.responseText))},r.send()})},Script=function(){function Script(e,t,r){classCallCheck(this,Script),this.id=r,this.path=r.replace(/[^\/]*$/,""),this.url=t,this.source=e}return createClass(Script,[{key:"execute",value:function execute(){eval(this.source)}}]),Script}(),ScriptLoader=function(){function e(t){var r=t.basePath,n=t.scriptInterceptors,o=t.fetch;classCallCheck(this,e),this.basePath=r,this.scriptInterceptors=n,this.fetch=o}return createClass(e,[{key:"getFileType",value:function(e){var t=e.match(/\.([^.\/]+)$/);return t&&this.scriptInterceptors[t[1]]?t[1]:"default"}},{key:"getUrl",value:function(e){var t=""+this.basePath+e,r=this.getFileType(e);return"default"===r?t+".js":""+t}},{key:"getInterceptor",value:function(e){var t=this.getFileType(e),r=this.scriptInterceptors.default,n="default"!==t&&this.scriptInterceptors[t];return{intercept:function(e){return n&&(e=n.intercept(e)),e=r.intercept(e)}}}},{key:"load",value:function(e){var t=this.getFileType(e),r=this.getInterceptor(e),n=this.getUrl(e);if(!r)throw new Error("Interceptor not found for "+t);return this.fetch(n).then(function(t){return r.intercept(new Script(t,n,e))})}}]),e}(),ImportParser=function(){function e(t){classCallCheck(this,e),this.tokenizer=t}return createClass(e,[{key:"rewrite",value:function(e){var t=e.script,r=e.imports;r.push.apply(r,toConsumableArray(this.tokenizer.extractImports(t)))}}]),e}(),TokenizerUtils=function(){function e(){classCallCheck(this,e)}return createClass(e,null,[{key:"splitMemberAndAlias",value:function(e){function t(e){return e.trim()}var r=/\s+as\s+/g,n="mapped",o=e.split(r).map(t),a=slicedToArray(o,2),i=a[0],s=a[1];return{name:i,alias:s,type:n}}},{key:"resolveRelativePath",value:function(e,t){var r=/(^|\/)([\\.]){3,}/g,n=/(^|\/)[.](?=[^.])/g,o=/^\//g,a=/(\.?[^.\n\/]+)+(^|\/)[.]{2}/,i=t[0];if("/"===i||"."===i){var s="/"===i?t:e+t;s=s.replace(r,""),s=s.replace(n,"");for(var u=s.replace(a,"");s!==u;)s=u,u=s.replace(a,"");return s=s.replace(o,"")}return t}},{key:"splitVariableAndValue",value:function(e){function t(e){return e.trim().replace(/;$/,"")}var r=/=/,n="mapped",o=e.split(r).map(t),a=slicedToArray(o,2),i=a[0],s=a[1];return{name:i,value:s,type:n}}},{key:"filterEmpty",value:function(e){return!!e.trim()}}]),e}(),ImportStatement=function e(t){var r=t.id,n=t.moduleName,o=t.members;classCallCheck(this,e),this.moduleName=n,this.members=o,this.id=r},ImportMember=function e(t){var r=t.name,n=t.alias,o=t.type;classCallCheck(this,e),this.name=r,this.alias=n,this.type=o},ImportTokenizer=function(){function e(t){classCallCheck(this,e),this.importGenerator=t}return createClass(e,[{key:"extractImports",value:function(e){var t=this,r=/^[\t ]*(import [\t \w"'-{}._]*?)[\t ]*;?[\t ]*$/gm,n=[];return e.source=e.source.replace(r,function(r,o){var a=t.replaceImport(o,{path:e.path});return n.push(a),t.importGenerator.formatImportMembers(a)}),n}},{key:"replaceImport",value:function(e,t){var r=this,n=this.importGenerator.generateId(),o=this.defaultMember(e),a=this.module(e,t),i=this.globMember(e),s=this.mappedMembers(e),u=[o,i].concat(toConsumableArray(s)).filter(function(e){return r.filterEmpty(e)}).map(function(e){return new ImportMember(e)});return new ImportStatement({id:n,moduleName:a,members:u})}},{key:"defaultMember",value:function(e){var t="default",r=/^import\s+(\w+)/,n=e.match(r),o=n?n[1]:null;return{name:o,type:t}}},{key:"module",value:function(e,t){var r=/(?:from\s+)?(["'])([\w\/\-._]+)\1$/,n=e.match(r),o=n?TokenizerUtils.resolveRelativePath(t.path,n[2]):null;return o}},{key:"globMember",value:function(e){var t="all",r=/^import\s+\*\s+as\s+(\w+)/,n=e.match(r),o=n?n[1]:null;return{name:o,type:t}}},{key:"mappedMembers",value:function(e){var t=/^import\s+\{([\w\s,]*)}/,r=e.match(t),n=r?r[1]:"";return n.split(",").filter(function(e){return TokenizerUtils.filterEmpty(e)}).map(function(e){return TokenizerUtils.splitMemberAndAlias(e)})}},{key:"filterEmpty",value:function(e){return!!e.name}}]),e}(),ExportParser=function(){function e(t){classCallCheck(this,e),this.tokenizer=t}return createClass(e,[{key:"rewrite",value:function(e){var t=e.script,r=e.exports,n=e.imports,o=this.tokenizer.extractExports(t);r.push.apply(r,toConsumableArray(o.exports)),n.push.apply(n,toConsumableArray(o.imports))}}]),e}(),ExportStatement=function e(t){var r=t.members,n=t.module,o=t.expression;classCallCheck(this,e),this.members=r,this.module=n,this.expression=o},ExportMember=function e(t){var r=t.name,n=t.alias,o=t.type;classCallCheck(this,e),this.name=r,this.alias=n,this.type=o},ExportTokenizer=function(){function e(t,r){classCallCheck(this,e),this.exportGenerator=t,this.importGenerator=r}return createClass(e,[{key:"extractExports",value:function(e){var t=this,r=/^[\t ]*(export[\t ]+[{*\w\d_$][^\n]*);?[\t ]*$/gm,n=[],o=[];return e.source=e.source.replace(r,function(e,r){var a=t.replaceExport(r,n),i=a.exportStatement,s=a.importStatement;return i&&n.push(i),s&&o.push(s),i.expression||""}),{exports:n,imports:o}}},{key:"replaceExport",value:function(e){return this.extractVariableDeclaration(e)||this.extractPreDeclaredVariables(e)||this.extractExpression(e)||this.triggerExtractionError(e)}},{key:"extractVariableDeclaration",value:function(e){var t=/^export\s+((?:let|var|const)\s+(.+))/,r=e.match(t),n=r?r:[],o=slicedToArray(n,3),a=o[0],i=o[1],s=o[2];if(a){var u=this.splitVariableDeclarations(s),c=u.map(function(e){return new ExportMember(e)});return{exportStatement:new ExportStatement({members:c,expression:i})}}}},{key:"extractPreDeclaredVariables",value:function(e){var t=/^export\s+(?:\{([\s\w\d_$,]*)}|(\*))(?:\s+from\s+(["'])?([\w\d\-._$\/]+)\3)?/,r=e.match(t),n=r?r:[],o=slicedToArray(n,5),a=o[0],i=o[1],s=o[2],u=(o[3],o[4]);if(a){if(u){var c=this.importGenerator.generateId(),l=void 0;if(s)l=this.importGenerator.formatImportMember(c,{type:"passThroughAll"});else{var p=this.splitVariableAliases(i);p.forEach(function(e){return e.type="passThrough"}),l=this.importGenerator.formatImportMembers({id:c,members:p})}return{importStatement:new ImportStatement({members:[],moduleName:u,id:c}),exportStatement:new ExportStatement({members:[],moduleName:u,expression:l})}}var f=this.splitVariableAliases(i),h=f.map(function(e){return new ExportMember(e)});return{exportStatement:new ExportStatement({members:h})}}}},{key:"extractExpression",value:function(e){var t=/^export\s+(default\s+)?((function|class)?[\w{(]+(?:\s+([\d_$\w]+))?.*)$/,r=e.match(t),n=r?r:[],o=slicedToArray(n,5),a=o[0],i=o[1],s=o[2],u=o[3],c=o[4];if(a){var l=!c,p=i&&!u,f=[],h=void 0;if(p||l)h="exports['default'] = "+s;else{var d="mapped",m=i?"default":null;h=""+s,f.push(new ExportMember({type:d,name:c,alias:m}))}return{exportStatement:new ExportStatement({members:f,expression:h})}}}},{key:"triggerExtractionError",value:function(e){throw"Export rewrite failed for line: "+e}},{key:"splitVariableAliases",value:function(e){var t=e.split(",").filter(function(e){return TokenizerUtils.filterEmpty(e)}).map(function(e){return TokenizerUtils.splitMemberAndAlias(e)});return t}},{key:"splitVariableDeclarations",value:function(e){var t=e.split(",").filter(function(e){return TokenizerUtils.filterEmpty(e)}).map(function(e){return TokenizerUtils.splitVariableAndValue(e)});return t}}]),e}(),AmdModule=function e(t){var r=t.id,n=t.dependencies,o=t.factory;classCallCheck(this,e),this.id=r,this.dependencies=n,"function"==typeof o?(this.exports={},this.factory=o):(this.exports=o,this.factory=function(){})},AmdFactory=function(){function e(){classCallCheck(this,e)}return createClass(e,[{key:"createLoader",value:function(e){function t(t,n,o){var a=r(t,n,o),i=new AmdModule(a);e.register(i)}function r(e,t,r){return"function"==typeof e||e.constructor===Object?{id:"UNKNOWN",dependencies:[],factory:e}:e.constructor===Array?{id:"UNKNOWN",dependencies:e,factory:t}:{id:e,dependencies:t,factory:r}}return t.amd={},t}}]),e}(),AmdWrapperGenerator$1=function(){function e(){classCallCheck(this,e),this.counter=0,this.defaultImports=[new ImportStatement({moduleName:"exports",id:"exports",members:[]})]}return createClass(e,[{key:"generateId",value:function(){return"__DEP"+ ++this.counter}},{key:"generate",value:function(e){var t=[].concat(toConsumableArray(this.defaultImports),toConsumableArray(e));return{dependencyList:this.generateDependencyList(t),dependencyArguments:this.generateDependencyArguments(t)}}},{key:"generateDependencyArguments",value:function(e){var t=e.map(function(e){return e.id}).join(",");return t}},{key:"generateDependencyList",value:function(e){var t=e.map(function(e){return e.moduleName}).map(function(e){return'"'+e+'"'}).join(",");return"["+t+"]"}},{key:"formatImportMembers",value:function(e){var t=this,r=e.id,n=e.members;return n.map(function(e){return t.formatImportMember(r,e)}).join("")}},{key:"formatImportMember",value:function(e,t){var r=t.alias||t.name;switch(t.type){case"default":case"all":case"mapped":return"var "+r+" = "+this.formatImportValue(e,t)+";";case"passThroughAll":return"Object.assign(exports, "+this.formatImportValue(e,{type:"all"})+");";case"passThrough":return'exports["'+r+'"] = '+this.formatImportValue(e,{type:"mapped",name:t.name})+";";default:return""}}},{key:"formatImportValue",value:function(e,t){var r=t.name,n=t.type;switch(n){case"default":return e+'.exports["default"]';case"all":return e+".exports";case"mapped":return e+'.exports["'+r+'"]';default:return""}}}]),e}(),AmdExportGenerator$1=function(){function e(){classCallCheck(this,e)}return createClass(e,[{key:"generate",value:function(e){return{exportMappings:this.generateExportMappings(e)}}},{key:"generateExportMappings",value:function(e){var t=this,r=e.map(function(e){return t.formatExportMembers(e.members)}).filter(function(e){return!!e}).join("");return r}},{key:"formatExportMembers",value:function(e){var t=this;return e.map(function(e){return t.formatExportMember(e)}).join("")}},{key:"formatExportMember",value:function(e){var t=e.name,r=e.alias||t;switch(e.type){case"mapped":return"exports['"+r+"'] = "+t+";";case"resolved":return"";default:throw"Unknown member type"}}}]),e}(),WrapperGeneratorAmd=function(){function e(t){var r=t.importGenerator,n=t.exportGenerator,o=t.getDefinePropertyName;classCallCheck(this,e),this.importGenerator=r,this.exportGenerator=n,this.getDefinePropertyName=o}return createClass(e,[{key:"wrap",value:function(e){var t=e.script,r=e.imports,n=e.exports,o=this.importGenerator.generate(r),a=o.dependencyList,i=o.dependencyArguments,s=this.exportGenerator.generate(n),u=s.exportMappings,c=document.location.origin,l=c+"/"+t.url,p=this.getDefinePropertyName(),f=t.source,h=p+'("'+t.id+'", '+a+", function("+i+'){ "use strict"; '+f+"\n"+u+"\n});",d=h+"\n//# sourceURL="+l;t.source=d}}]),e}(),AmdDependencyResolver=function(){function e(){classCallCheck(this,e)}return createClass(e,[{key:"resolve",value:function(e){for(var t=e.failedModules,r=e.pendingModules,n=e.modules,o=0;o<r.length;o++){var a=r[o];if(this.hasMetDependencies(a,n)){r.splice(o,1);try{var i=a.factory.apply(a,toConsumableArray(this.getDependencies(a,n)));i&&(a.exports=i),Object.freeze(a.exports),n.push(a)}catch(e){t.push(a),console.error("Failed to load module "+a.id,e)}o=-1}}}},{key:"getDefaultDependency",value:function(e,t){switch(e){case"exports":return t.exports}}},{key:"dependencyToModule",value:function(e,t){var r=this;return function(n){return r.getDefaultDependency(n,e)||t.find(function(e){return n===e.id})}}},{key:"getDependencies",value:function(e,t){return e.dependencies.map(this.dependencyToModule(e,t))}},{key:"hasMetDependencies",value:function(e,t){return e.dependencies.every(this.dependencyToModule(e,t))}}]),e}(),AmdDependencyRepository=function(){function e(t){var r=t.loadScript,n=t.dependencyResolver;classCallCheck(this,e),this.loadScript=r,this.dependencyResolver=n,this.loadingModuleIds=[],this.pendingModules=[],this.failedModules=[],this.resolvedModules=[{id:"exports"}]}return createClass(e,[{key:"register",value:function(e){var t=this,r=this.getUnresolvedDependencies(e.dependencies);if(0===r.length)return this.pendingModules.push(e),this.dependencyResolver.resolve({failedModules:this.failedModules,pendingModules:this.pendingModules,modules:this.resolvedModules}),void this.detectCircularReferences();var n=this.getUnloadedDependencies(r);return 0===n.length?(this.pendingModules.push(e),void this.detectCircularReferences()):(n.forEach(function(e){t.loadingModuleIds.indexOf(e)===-1&&(t.loadingModuleIds.push(e),t.loadScript(e).then(function(r){var n=t.loadingModuleIds.indexOf(e);n!==-1&&t.loadingModuleIds.splice(n,1),r.execute()}))}),this.pendingModules.push(e),void this.detectCircularReferences())}},{key:"detectCircularReferences",value:function(){0===this.failedModules.length&&0===this.loadingModuleIds.length&&this.pendingModules.length>0&&console.log("Possible circular dependencies",this.pendingModules)}},{key:"getUnloadedDependencies",value:function(e){var t=this;return e.filter(function(e){return!t.pendingModules.find(function(t){return e===t.id})&&!t.loadingModuleIds.find(function(t){return e===t})})}},{key:"getUnresolvedDependencies",value:function(e){var t=this;return e.filter(function(e){return!t.resolvedModules.find(function(t){return e===t.id})})}}]),e}(),SingleRunDefineFactor=function(){function e(t){classCallCheck(this,e),this.define=t,this.uidCounter=0,this.prefix=(Math.random()+"_").replace(/\./g,"")}return createClass(e,[{key:"registerGlobal",value:function(){var e=this.getNamespace();window[e]||(window[e]={})}},{key:"setInstance",value:function(e){this.define=e}},{key:"getNamespace",value:function(){return"__singleRunDefine"}},{key:"getUID",value:function(){return""+this.prefix+ ++this.uidCounter}},{key:"create",value:function(){function e(){delete window[r][n],t.apply(t,arguments)}var t=this.define;if(!t)throw new Error("A define method has not been registered on the define factory");var r=this.getNamespace(),n=this.getUID();window[r][n]=e;var o='window["'+r+'"]["'+n+'"]';return o}}]),e}(),JavascriptInterceptor=function(){function e(t){var r=t.importParser,n=t.exportParser,o=t.wrapperGenerator;classCallCheck(this,e),this.importParser=r,this.exportParser=n,this.wrapperGenerator=o}return createClass(e,[{key:"intercept",value:function(e){var t={script:e,imports:[],exports:[]};return this.importParser.rewrite(t),this.exportParser.rewrite(t),this.wrapperGenerator.wrap(t),e}}]),e}(),HTMLInterceptor=function(){function e(){classCallCheck(this,e)}return createClass(e,[{key:"intercept",value:function(e){var t=e.source.replace(/"/g,'\\"').replace(/\n/g,"<!-- LINE BREAK --!>");return e.source='var template = "'+t+'";\nexport {template as default}',e}}]),e}();FastArray$1.prototype.shift=function(){if(this.isAtEnd())throw"End of match not found";var e=this.first();return this.startCursor++,e},FastArray$1.prototype.push=function(e){this.array[this.endCursor]=e,this.endCursor++},FastArray$1.prototype.pop=function(){var e=this.last();return this.endCursor--,e},FastArray$1.prototype.first=function(){return this.array[this.startCursor]},FastArray$1.prototype.last=function(){return this.array[this.endCursor-1]},FastArray$1.prototype.isAtEnd=function(){return this.length()<=0},FastArray$1.prototype.length=function(){return this.endCursor-this.startCursor},FastArray$1.prototype.reverse=function(){for(var e=this.length()/2,t=this.endCursor-1,r=this.array,n=this.startCursor;n<e;n++){var o=[r[t-n],r[n]];r[n]=o[0],r[t-n]=o[1]}return this},FastArray$1.prototype.getArray=function(){return this.array.slice(this.startCursor,this.endCursor)},FastArray$1.prototype.get=function(e){return this.array[this.startCursor+e]};var stringHash=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0},SELECTOR=/[a-z0-9_-]/i,uniqueCounter=0,CssInterceptor=function(){function e(){classCallCheck(this,e)}return createClass(e,[{key:"intercept",value:function(e){var t=e.id.replace(/[\/]/g,"O").replace(/\.[^\/.]*$/,""),r="{namespace}__{name}",n=e.source,o=modulizeCss(n,{namespace:t,substitutionPattern:r}),a=this.keyValueArrayToObject(o.substitutions);return this.generateJs(a,e),this.addCSSToDOM(o.encodedCss,e),e}},{key:"addCSSToDOM",value:function(e,t){var r=document.createElement("style");r.setAttribute("data-src",t.id),r.innerHTML=e,document.head.appendChild(r)}},{key:"keyValueArrayToObject",value:function(e){return Object.keys(e).filter(function(e){return e}).reduce(function(t,r){var n=e[r].join(" ");return t[r]=""+n,t},{})}},{key:"generateJs",value:function(e,t){var r=JSON.stringify(e);t.source="var selectors = JSON.parse('"+r+"');\nexport {selectors as default}"}}]),e}(),importGenerator=new AmdWrapperGenerator$1,exportGenerator=new AmdExportGenerator$1,temporaryLoaderFactory=new SingleRunDefineFactor;temporaryLoaderFactory.registerGlobal();var scriptInterceptors={default:new JavascriptInterceptor({importParser:new ImportParser(new ImportTokenizer(importGenerator)),exportParser:new ExportParser(new ExportTokenizer(exportGenerator,importGenerator)),wrapperGenerator:new WrapperGeneratorAmd({importGenerator:importGenerator,exportGenerator:exportGenerator,getDefinePropertyName:function(){return temporaryLoaderFactory.create()}})}),css:new CssInterceptor,html:new HTMLInterceptor},mainAmd=new ModulinFactory({temporaryLoaderFactory:temporaryLoaderFactory,loaderFactory:new AmdFactory,dependencyRepositoryFactory:dependencyRepositoryFactory});return mainAmd}();